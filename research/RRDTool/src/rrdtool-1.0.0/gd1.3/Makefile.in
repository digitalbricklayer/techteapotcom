# things that the GNU standards document suggests all makefiles
# should have.
SHELL = /bin/sh
.SUFFIXES:
.SUFFIXES: .c .o .pl .pm .pod .html .man

CC=@CC@
AR=ar
CFLAGS_EXTRA = @CFLAGS_EXTRA@
CFLAGS = @CFLAGS@ # -pg
CFLAGS_ALL = $(CFLAGS) $(CFLAGS_EXTRA)
LIBS = -L. -lrrd_gd -lm

all: librrd_gd.a gddemo giftogd webgif

gddemo: gddemo.o librrd_gd.a gd.h gdfonts.h gdfontl.h
	$(CC) gddemo.o -o gddemo	$(LIBS)

giftogd: giftogd.o libgd.a gd.h
	$(CC) giftogd.o -o giftogd	$(LIBS) 

librrd_gd.a: gd.o gd.h gdfontg.o gdfontg.h gdfontl.o gdfontl.h gdfontmb.o \
	gdfontmb.h gdfonts.o gdfonts.h gdfontt.o gdfontt.h \
	gdlucidab10.o gdlucidab10.h gdlucidab12.o gdlucidab12.h \
	gdlucidab14.o gdlucidab14.h gdlucidan10.o gdlucidan10.h \
	gdlucidan12.o gdlucidan12.h gdlucidan14.o gdlucidan14.h
	rm -f libgd.a
	$(AR) rc librrd_gd.a gd.o gdfontg.o gdfontl.o gdfontmb.o gdfonts.o \
		gdfontt.o gdlucidab10.o gdlucidab12.o gdlucidab14.o \
		gdlucidan10.o gdlucidan12.o gdlucidan14.o


webgif: webgif.o librrd_gd.a gd.h
	$(CC) webgif.o -o webgif	$(LIBS)

clean:
	-rm -f *.o *.a gddemo giftogd 

realclean:	clean
	-rm -f Makefile

.c.o:
	$(CC) $(CFLAGS_ALL) -c $<
