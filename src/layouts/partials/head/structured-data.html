{{- /* JSON-LD Structured Data */ -}}
{{- $logoURL := absURL "/images/techteapot-logo.png" -}}
{{- $authorURL := absURL "about/" -}}

{{- if .IsHome -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": {{ .Site.Title | jsonify }},
  "url": {{ .Site.BaseURL | jsonify }},
  "description": {{ with .Params.Description }}{{ . | jsonify }}{{ else }}{{ .Site.Params.description | jsonify }}{{ end }}
}
</script>

{{- else if .IsPage -}}
{{- $imageURL := $logoURL -}}
{{- with .Params.thumbnail }}{{- $imageURL = (absURL .) -}}{{- end -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": {{ if eq .Section "articles" }}"Article"{{ else }}"BlogPosting"{{ end }},
  "headline": {{ .Title | jsonify }},
  "description": {{ with .Params.Description }}{{ . | jsonify }}{{ else }}{{ .Site.Params.description | jsonify }}{{ end }},
  "datePublished": {{ .Date.Format "2006-01-02T15:04:05Z07:00" | jsonify }},
  "dateModified": {{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" | jsonify }},
  "url": {{ .Permalink | jsonify }},
  "image": {{ $imageURL | jsonify }},
  "author": {
    "@type": "Person",
    "name": "Jack Hughes",
    "url": {{ $authorURL | jsonify }}
  },
  "publisher": {
    "@type": "Organization",
    "name": {{ .Site.Title | jsonify }},
    "logo": {
      "@type": "ImageObject",
      "url": {{ $logoURL | jsonify }}
    }
  }
}
</script>

{{- /* BreadcrumbList for single pages */ -}}
{{- $section := .CurrentSection -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": {{ .Site.Title | jsonify }},
      "item": {{ .Site.BaseURL | jsonify }}
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": {{ $section.Title | jsonify }},
      "item": {{ $section.Permalink | jsonify }}
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": {{ .Title | jsonify }},
      "item": {{ .Permalink | jsonify }}
    }
  ]
}
</script>
{{- end -}}
